#Computer Architecture Midterm#

##Specification Document#
###Inputs and Outputs###
This bike light takes one input from a single button and returns one output to a single LED. The bike light cycles through its four operational modes by pressing the button (details are described in the following section).

###Operational Modes###
This bike light has four modes: Off, On, Blink, and Dim (On at approximately 50% brightness). The below waveforms are in units of brightness and not frequency.

![four modes: Off, On, Blinking, and Dim](https://github.com/SelinaWang/CompArchFA15/blob/master/Midterm/Images/waveforms.png)

The modes are cycled through in the following fashion:

![Cycling through the four modes](https://github.com/SelinaWang/CompArchFA15/blob/master/Midterm/Images/FSM.PNG)

The LED flashes at a frequency of 4Hz in blink mode.

##Block Diagram##
![Block Diagram](https://github.com/SelinaWang/CompArchFA15/blob/master/Midterm/Images/BlockDiagram.PNG)

The block diagram shows a high-level view of the digital circuit. The signal from the push button is passed into the input conditioner where it debounces the noisy input and outputs a smooth signal to the 4 stage ring counter as its enable signal. The ring counter then increments and passes a four bit signal to the finite state machine. Depending on the signal passed in, the finite state machine produces the corresponding select signals which are passed into the 4 to 1 mux to select one of the four signals to pass onto the LED. The off signal is generated by passing a binary 0 to the mux therefore not supplying any power to the LED. The on signal is generated by passing a binary 1 to the mux therefore supplying constant full power to the LED. The blink signal is generated by a frequency divider that takes the high frequency clock as input and outputs a 4 Hz square wave therefore turning the LED on and off four times per second. The dim signal is generated by passing the clock signal (32768 Hz square wave) directly to the mux. Since a square wave has a duty cycle of 50%, the brightness would then appear to be half of the full on brightness.

##Components##

###Input Conditioner###
####Specification####
The input conditioner debounces a noisy signal which has a button noise that decays within 1 second and gives out a smooth, stable signal.
####Inputs####
1 bit noisy signal from button press
####Outputs####
1 bit stable signal to the 4 stage ring counter
####Schematic####
![Input Conditioner](https://github.com/SelinaWang/CompArchFA15/blob/master/Midterm/Images/InputConditioner.png)
####Size####
Subcomponents | Cost Per | # Used | Total
--------------|----------|--------|-------
33-Stage Ring Counter | 692 | 1 | 692
Positive Edge Triggered D-Flip Flop | 13 | 2 | 26
2 Input Exclusive NOR gate | 2 | 1 | 2
2 Input AND gate | 3 | 1 | 3
Buffer with Enable | 2 | 1 | 2
Total GIE | 725


###Finite State Machine###
####Specification####
The finite state machine takes a 4 bit mode signal and outputs the corresponding select signals for the 4 to 1 mux. It uses two 2 input NOR gates which only outputs 1 if both inputs are 0.
####Inputs####
4 bit mode signal
####Outputs####
1 bit SEL0
1 bit SEL1
####Schematic####
![Finite State Machine](https://github.com/SelinaWang/CompArchFA15/blob/master/Midterm/Images/FSMSchematic.png)
####Size####
Subcomponents | Cost Per | # Used | Total
--------------|----------|--------|-------
2 Input NOR gate | 2 | 2 | 4
Total GIE | 4

###Frequency Divider###
####Specification####
The frequency divider takes in the high frequency clock signal and outputs a 4 Hz blink signal. It uses 13 divide-by-2 counters.
####Inputs####
32768 Hz square wave clock signal
####Outputs####
4 Hz square wave blink signal
####Schematic####
![Frequency Divider](https://github.com/SelinaWang/CompArchFA15/blob/master/Midterm/Images/FrequencyDivider.png)
####Size####
Subcomponents | Cost Per | # Used | Total
--------------|----------|--------|-------
Positive Edge triggered D-Flip Flop | 13 | 13 | 169
Total GIE  | 169


##References##
I talked to ninja Radmer about dividing the frequency and he gave me the idea of using a frequency divider. Then I did some in-depth research on how to construct and use one.

Frequency Divider: http://www.electronics-tutorials.ws/counter/count_1.html

Dimming: http://www.digikey.com/en/articles/techzone/2010/apr/how-to-dim-an-led
